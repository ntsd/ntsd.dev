<!DOCTYPE html><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta content="IE=edge" http-equiv="X-UA-Compatible"><meta content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" name="google-site-verification"><meta content="width=device-width,initial-scale=1" name="viewport"><meta name="keywords" content="Programming, Web Development, Coding, Artificial Intelligence, Machine Learning, Jirawat Boonkumnerd"><meta name="theme-color" content="#000000"><meta content="script-src 'self' 'unsafe-inline' giscus.app *.jsdelivr.net *.googletagmanager.com *.google-analytics.com; object-src 'none';base-uri 'none';" http-equiv="Content-Security-Policy"><title>Reduce runtime JavaScript to improve page speed using Puppeteer | Jirawat Boonkumnerd</title><meta name="generator" content="Jekyll v4.2.1"><meta property="og:title" content="Reduce runtime JavaScript to improve page speed using Puppeteer"><meta name="author" content="ntsd"><meta property="og:locale" content="en_US"><meta name="description" content="The problem is when I am using many JavaScript libraries with big sizes and unnecessary to run in runtime such as PrismJS, AnchorJS, and Wordcloud2. All of these JavaScript libraries will load content from HTML and render it component by adding element classes and styles. In this example, I will show how to use PrismJS without runtime JavaScript because it’s the biggest library I’m using. To do that I need Puppeteer headless Chrome for NodeAPI. First of all, I download PrismJS from the download page and just select all languages then download JavaScript and CSS files. Put both on the HTML page. It took 500kb of JavaScript and 14kb of CSS. <script type=&quot;text/javascript&quot; src=&quot;/assets/js/prism.js&quot; data-post-js=&quot;true&quot; ></script> I have a custom data attributes name data-post-js which I’ll use to specific JavaScript tag for render before runtime. I call it Post JS because it works like PostCSS that will run on build only. For JavaScript I want it to run on runtime I use to type text/runtime-javascript to avoid running in the Puppeteer. <script type='text/runtime-javascript' async> </script> To make it work I create a Gulp task when building the page. I want to make Puppeteer run and render the HTML page. Explain below. gulp.task(&quot;post-js&quot;, async () => { browserSync.init({ files: [SITE_ROOT + &quot;/**&quot;], open: false, port: 7000, server: { baseDir: SITE_ROOT, serveStaticOptions: { extensions: [&quot;html&quot;], }, }, }); await new Promise(resolve => setTimeout(resolve, 3000)); // wait browserSync run return gulp.src(SITE_ROOT_HTML, { base: SITE_ROOT }) .pipe(through2.obj(async (file, _, cb) => { if (!file.isBuffer()) { // not support type return cb(null, file); } const relativeRootPath = path.relative(process.cwd(), file.path); const relativePath = path.relative(SITE_ROOT, relativeRootPath); console.log(`Rendering ${relativePath}`); const browser = await puppeteer.launch(); const page = await browser.newPage(); await page.goto(`http://localhost:7000/${relativePath}`, { waitUntil: 'networkidle0' }); let body = await page.evaluate(() => { // remove data-post-js script const unusedElements = document.querySelectorAll('script[data-post-js=&quot;true&quot;]'); for (let i = 0; i < unusedElements.length; i++) { unusedElements[i].parentNode.removeChild(unusedElements[i]); } return document.documentElement.outerHTML; }); // replace script type type=&quot;text/runtime-javascript&quot; to type&quot;text/javascript&quot; body = body.replace(/type\=\&quot;text\/runtime\-javascript\&quot;/g, 'type=&quot;text/javascript&quot;'); // DOCTYPE is gone when puppeteer run body = '<!DOCTYPE html>' + body; file.contents = Buffer.from(body); await browser.close(); cb(null, file); })) .pipe(htmlmin({ collapseWhitespace: true })) .pipe(gulp.dest(SITE_ROOT)) .on('end', () => { browserSync.exit(); console.log('post-js finished'); }); }); First, use BrowserSync to serve the whole site. (lines 2-12) And then use Puppeteer to open the pages and run all of the JavaScript tags. (lines 27-30) After the page ran, Remove used JavaScript with the data-post-js attribute. (lines 32-39) Then replace text/runtime-javascript with text/javascript to make it a normal run in runtime. (line 42) Because <!DOCTYPE html> will remove when Puppeteer runs so I need to add it again. (line 45) Now the page will render PrismJS and remove it from runtime JavaScript. This will make the page faster to not download the 500kb size of PrismJS and no need to wait for the script to render in runtime. This method will also work with many JavaScript libraries which not need to run in runtime. The concept is basically the same as Pre-rendering and getStaticProps in NextJS. See in Github"><meta property="og:description" content="The problem is when I am using many JavaScript libraries with big sizes and unnecessary to run in runtime such as PrismJS, AnchorJS, and Wordcloud2. All of these JavaScript libraries will load content from HTML and render it component by adding element classes and styles. In this example, I will show how to use PrismJS without runtime JavaScript because it’s the biggest library I’m using. To do that I need Puppeteer headless Chrome for NodeAPI. First of all, I download PrismJS from the download page and just select all languages then download JavaScript and CSS files. Put both on the HTML page. It took 500kb of JavaScript and 14kb of CSS. <script type=&quot;text/javascript&quot; src=&quot;/assets/js/prism.js&quot; data-post-js=&quot;true&quot; ></script> I have a custom data attributes name data-post-js which I’ll use to specific JavaScript tag for render before runtime. I call it Post JS because it works like PostCSS that will run on build only. For JavaScript I want it to run on runtime I use to type text/runtime-javascript to avoid running in the Puppeteer. <script type='text/runtime-javascript' async> </script> To make it work I create a Gulp task when building the page. I want to make Puppeteer run and render the HTML page. Explain below. gulp.task(&quot;post-js&quot;, async () => { browserSync.init({ files: [SITE_ROOT + &quot;/**&quot;], open: false, port: 7000, server: { baseDir: SITE_ROOT, serveStaticOptions: { extensions: [&quot;html&quot;], }, }, }); await new Promise(resolve => setTimeout(resolve, 3000)); // wait browserSync run return gulp.src(SITE_ROOT_HTML, { base: SITE_ROOT }) .pipe(through2.obj(async (file, _, cb) => { if (!file.isBuffer()) { // not support type return cb(null, file); } const relativeRootPath = path.relative(process.cwd(), file.path); const relativePath = path.relative(SITE_ROOT, relativeRootPath); console.log(`Rendering ${relativePath}`); const browser = await puppeteer.launch(); const page = await browser.newPage(); await page.goto(`http://localhost:7000/${relativePath}`, { waitUntil: 'networkidle0' }); let body = await page.evaluate(() => { // remove data-post-js script const unusedElements = document.querySelectorAll('script[data-post-js=&quot;true&quot;]'); for (let i = 0; i < unusedElements.length; i++) { unusedElements[i].parentNode.removeChild(unusedElements[i]); } return document.documentElement.outerHTML; }); // replace script type type=&quot;text/runtime-javascript&quot; to type&quot;text/javascript&quot; body = body.replace(/type\=\&quot;text\/runtime\-javascript\&quot;/g, 'type=&quot;text/javascript&quot;'); // DOCTYPE is gone when puppeteer run body = '<!DOCTYPE html>' + body; file.contents = Buffer.from(body); await browser.close(); cb(null, file); })) .pipe(htmlmin({ collapseWhitespace: true })) .pipe(gulp.dest(SITE_ROOT)) .on('end', () => { browserSync.exit(); console.log('post-js finished'); }); }); First, use BrowserSync to serve the whole site. (lines 2-12) And then use Puppeteer to open the pages and run all of the JavaScript tags. (lines 27-30) After the page ran, Remove used JavaScript with the data-post-js attribute. (lines 32-39) Then replace text/runtime-javascript with text/javascript to make it a normal run in runtime. (line 42) Because <!DOCTYPE html> will remove when Puppeteer runs so I need to add it again. (line 45) Now the page will render PrismJS and remove it from runtime JavaScript. This will make the page faster to not download the 500kb size of PrismJS and no need to wait for the script to render in runtime. This method will also work with many JavaScript libraries which not need to run in runtime. The concept is basically the same as Pre-rendering and getStaticProps in NextJS. See in Github"><link rel="canonical" href="https://ntsd.dev/reduce-runtime-javascript-using-puppeeteer/"><meta property="og:url" content="https://ntsd.dev/reduce-runtime-javascript-using-puppeeteer/"><meta property="og:site_name" content="Jirawat Boonkumnerd"><meta property="og:image" content="https://ntsd.dev/pwa/icons/legacy/512.png"><meta property="og:type" content="article"><meta property="article:published_time" content="2021-11-03T00:00:00+07:00"><meta name="twitter:card" content="summary_large_image"><meta property="twitter:image" content="https://ntsd.dev/pwa/icons/legacy/512.png"><meta property="twitter:title" content="Reduce runtime JavaScript to improve page speed using Puppeteer"><script type="application/ld+json">{"mainEntityOfPage":{"@type":"WebPage","@id":"https://ntsd.dev/reduce-runtime-javascript-using-puppeeteer/"},"@type":"BlogPosting","url":"https://ntsd.dev/reduce-runtime-javascript-using-puppeeteer/","image":"https://ntsd.dev/pwa/icons/legacy/512.png","author":{"@type":"Person","name":"ntsd"},"headline":"Reduce runtime JavaScript to improve page speed using Puppeteer","dateModified":"2021-11-03T00:00:00+07:00","datePublished":"2021-11-03T00:00:00+07:00","description":"The problem is when I am using many JavaScript libraries with big sizes and unnecessary to run in runtime such as PrismJS, AnchorJS, and Wordcloud2. All of these JavaScript libraries will load content from HTML and render it component by adding element classes and styles. In this example, I will show how to use PrismJS without runtime JavaScript because it’s the biggest library I’m using. To do that I need Puppeteer headless Chrome for NodeAPI. First of all, I download PrismJS from the download page and just select all languages then download JavaScript and CSS files. Put both on the HTML page. It took 500kb of JavaScript and 14kb of CSS. &lt;script type=&quot;text/javascript&quot; src=&quot;/assets/js/prism.js&quot; data-post-js=&quot;true&quot; &gt;&lt;/script&gt; I have a custom data attributes name data-post-js which I’ll use to specific JavaScript tag for render before runtime. I call it Post JS because it works like PostCSS that will run on build only. For JavaScript I want it to run on runtime I use to type text/runtime-javascript to avoid running in the Puppeteer. &lt;script type=&#39;text/runtime-javascript&#39; async&gt; &lt;/script&gt; To make it work I create a Gulp task when building the page. I want to make Puppeteer run and render the HTML page. Explain below. gulp.task(&quot;post-js&quot;, async () =&gt; { browserSync.init({ files: [SITE_ROOT + &quot;/**&quot;], open: false, port: 7000, server: { baseDir: SITE_ROOT, serveStaticOptions: { extensions: [&quot;html&quot;], }, }, }); await new Promise(resolve =&gt; setTimeout(resolve, 3000)); // wait browserSync run return gulp.src(SITE_ROOT_HTML, { base: SITE_ROOT }) .pipe(through2.obj(async (file, _, cb) =&gt; { if (!file.isBuffer()) { // not support type return cb(null, file); } const relativeRootPath = path.relative(process.cwd(), file.path); const relativePath = path.relative(SITE_ROOT, relativeRootPath); console.log(`Rendering ${relativePath}`); const browser = await puppeteer.launch(); const page = await browser.newPage(); await page.goto(`http://localhost:7000/${relativePath}`, { waitUntil: &#39;networkidle0&#39; }); let body = await page.evaluate(() =&gt; { // remove data-post-js script const unusedElements = document.querySelectorAll(&#39;script[data-post-js=&quot;true&quot;]&#39;); for (let i = 0; i &lt; unusedElements.length; i++) { unusedElements[i].parentNode.removeChild(unusedElements[i]); } return document.documentElement.outerHTML; }); // replace script type type=&quot;text/runtime-javascript&quot; to type&quot;text/javascript&quot; body = body.replace(/type\\=\\&quot;text\\/runtime\\-javascript\\&quot;/g, &#39;type=&quot;text/javascript&quot;&#39;); // DOCTYPE is gone when puppeteer run body = &#39;&lt;!DOCTYPE html&gt;&#39; + body; file.contents = Buffer.from(body); await browser.close(); cb(null, file); })) .pipe(htmlmin({ collapseWhitespace: true })) .pipe(gulp.dest(SITE_ROOT)) .on(&#39;end&#39;, () =&gt; { browserSync.exit(); console.log(&#39;post-js finished&#39;); }); }); First, use BrowserSync to serve the whole site. (lines 2-12) And then use Puppeteer to open the pages and run all of the JavaScript tags. (lines 27-30) After the page ran, Remove used JavaScript with the data-post-js attribute. (lines 32-39) Then replace text/runtime-javascript with text/javascript to make it a normal run in runtime. (line 42) Because &lt;!DOCTYPE html&gt; will remove when Puppeteer runs so I need to add it again. (line 45) Now the page will render PrismJS and remove it from runtime JavaScript. This will make the page faster to not download the 500kb size of PrismJS and no need to wait for the script to render in runtime. This method will also work with many JavaScript libraries which not need to run in runtime. The concept is basically the same as Pre-rendering and getStaticProps in NextJS. See in Github","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ntsd.dev/pwa/icons/icon-min.svg"},"name":"ntsd"},"@context":"https://schema.org"}</script><link rel="stylesheet" href="/assets/css/style.css"><link rel="manifest" href="/pwa/manifest.json" async=""><link rel="shortcut icon" href="/pwa/icons/icon-min.svg" async=""><link rel="apple-touch-icon" href="/pwa/icons/icon-min.svg" async=""><script>function async(u, c, t, p) { function l() { var d = document, s = "script", o = d.createElement(s), e = d.getElementsByTagName(s)[0]; o.src = u; o.async = true; if (p) { o.setAttribute("data-post-js", true); } if (c) { o.addEventListener( "load", function (e) { c(e); }, false ); } e.parentNode.insertBefore(o, e); } if (t) { setTimeout(l, t); } else { l(); } }</script></head><body><nav class="bg-white shadow-md sticky top-0 z-50 transition-transform duration-300 transform" id="navbar"><div class="container mx-auto p-4 lg:flex lg:justify-between lg:items-center"><div class="lg:flex lg:items-center"><div class="flex items-center justify-between"><div><a class="text-xl lg:text-2xl font-bold text-gray-800 hover:text-gray-700" href="/">Jirawat Boonkumnerd</a></div><div class="flex lg:hidden"><button aria-label="toggle menu" class="text-gray-500 hover:text-gray-600 focus:outline-none focus:text-gray-600" id="nav-toggle" type="button"><svg class="w-6 h-6 fill-current" viewBox="0 0 24 24"><path d="M4 5h16a1 1 0 0 1 0 2H4a1 1 0 1 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2z" fill-rule="evenodd"></path></svg></button></div></div><div class="flex flex-col text-gray-600 capitalize lg:flex lg:space-x-4 lg:px-16 lg:-mx-4 lg:flex-row lg:items-center md:hidden" id="nav-left"><a class="mt-4 lg:mt-0 hover:text-gray-900" href="/">HOME</a> <a class="mt-4 lg:mt-0 hover:text-gray-900" href="/blog/">BLOG</a> <a class="mt-4 lg:mt-0 hover:text-gray-900" href="/projects/">PROJECTS</a> <a class="mt-4 lg:mt-0 hover:text-gray-900" href="/tags/">TAGS</a> <a class="mt-4 lg:mt-0 hover:text-gray-900" href="/about/">ABOUT</a></div></div><div class="flex justify-center mt-6 lg:flex lg:mt-0 md:hidden" id="nav-right"><div class="flex space-x-4"><a aria-label="RSS" class="text-gray-600 hover:text-gray-400" href="/feed.xml" rel="noopener noreferrer" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" class="w-7 h-7 fill-current" viewBox="0 0 20 20"><path d="M5 3a1 1 0 000 2c5.523 0 10 4.477 10 10a1 1 0 102 0C17 8.373 11.627 3 5 3z"></path><path d="M4 9a1 1 0 011-1 7 7 0 017 7 1 1 0 11-2 0 5 5 0 00-5-5 1 1 0 01-1-1zM3 15a2 2 0 114 0 2 2 0 01-4 0z"></path></svg> </a><a aria-label="Github" class="text-gray-600 hover:text-gray-400" href="https://github.com/ntsd" rel="noopener noreferrer" target="_blank"><svg class="w-7 h-7 fill-current" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12.026 2C7.13295 1.99937 2.96183 5.54799 2.17842 10.3779C1.395 15.2079 4.23061 19.893 8.87302 21.439C9.37302 21.529 9.55202 21.222 9.55202 20.958C9.55202 20.721 9.54402 20.093 9.54102 19.258C6.76602 19.858 6.18002 17.92 6.18002 17.92C5.99733 17.317 5.60459 16.7993 5.07302 16.461C4.17302 15.842 5.14202 15.856 5.14202 15.856C5.78269 15.9438 6.34657 16.3235 6.66902 16.884C6.94195 17.3803 7.40177 17.747 7.94632 17.9026C8.49087 18.0583 9.07503 17.99 9.56902 17.713C9.61544 17.207 9.84055 16.7341 10.204 16.379C7.99002 16.128 5.66202 15.272 5.66202 11.449C5.64973 10.4602 6.01691 9.5043 6.68802 8.778C6.38437 7.91731 6.42013 6.97325 6.78802 6.138C6.78802 6.138 7.62502 5.869 9.53002 7.159C11.1639 6.71101 12.8882 6.71101 14.522 7.159C16.428 5.868 17.264 6.138 17.264 6.138C17.6336 6.97286 17.6694 7.91757 17.364 8.778C18.0376 9.50423 18.4045 10.4626 18.388 11.453C18.388 15.286 16.058 16.128 13.836 16.375C14.3153 16.8651 14.5612 17.5373 14.511 18.221C14.511 19.555 14.499 20.631 14.499 20.958C14.499 21.225 14.677 21.535 15.186 21.437C19.8265 19.8884 22.6591 15.203 21.874 10.3743C21.089 5.54565 16.9181 1.99888 12.026 2Z"></path></svg> </a><a aria-label="Linkedin" class="text-gray-600 hover:text-gray-400" href="https://www.linkedin.com/in/ntsd" rel="noopener noreferrer" target="_blank"><svg class="w-7 h-7 fill-current" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 21H9V9H13V11C13.8526 9.91525 15.1456 9.26857 16.525 9.237C19.0056 9.25077 21.0072 11.2694 21 13.75V21H17V14.25C16.84 13.1326 15.8818 12.3036 14.753 12.306C14.2593 12.3216 13.7932 12.5378 13.4624 12.9046C13.1316 13.2715 12.9646 13.7573 13 14.25V21ZM7 21H3V9H7V21ZM5 7C3.89543 7 3 6.10457 3 5C3 3.89543 3.89543 3 5 3C6.10457 3 7 3.89543 7 5C7 5.53043 6.78929 6.03914 6.41421 6.41421C6.03914 6.78929 5.53043 7 5 7Z"></path></svg> </a><a aria-label="Webring" class="text-gray-600 hover:text-gray-400" href="https://webring.wonderful.software#ntsd.dev" rel="noopener noreferrer" target="_blank"><svg class="mt-1 w-6 h-6 fill-current" fill="none" viewBox="0 0 416 416" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M53 128.8l-16-8.2a192 192 0 1094.7-88.9l7.1 16.6A174 174 0 1153 128.8z" fill-rule="evenodd" fill="currentColor"></path><path d="M94.7 92.3L82 126.5 62.6 95.7l-36.4-1.4 23.3-28-9.9-35.1 33.9 13.5 30.3-20.3-2.4 36.4L130 83.3l-35.3 9z" fill="currentColor"></path></svg></a></div></div></div></nav><script type="text/javascript">var navbar = document.querySelector("#navbar"); var toggle = document.querySelector("#nav-toggle"); var navLeft = document.querySelector("#nav-left"); var navRight = document.querySelector("#nav-right"); var nav = { close: function () { navLeft.classList.add("md:hidden"); navRight.classList.add("md:hidden"); toggle.classList.remove("nav-open"); }, open: function () { navLeft.classList.remove("md:hidden"); navRight.classList.remove("md:hidden"); toggle.classList.add("nav-open"); } }; toggle.addEventListener("click", function (e) { if (toggle.className.indexOf("nav-open") > 0) { nav.close(); } else { nav.open(); } }); var prevScrollPos = window.pageYOffset; window.onscroll = function () { var curScrollPos = window.pageYOffset; if (curScrollPos > navbar.offsetHeight) { if (prevScrollPos > curScrollPos) { navbar.classList.remove("lg:-translate-y-full"); } else { navbar.classList.add("lg:-translate-y-full"); } prevScrollPos = curScrollPos; } };</script><style type="text/css">header .header-bg { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 2000 1500'%3E%3Cdefs%3E%3Crect stroke='%23000000' stroke-width='0.12' width='1' height='1' id='s'/%3E%3Cpattern id='a' width='3' height='3' patternUnits='userSpaceOnUse' patternTransform='scale(42.85) translate(-976.66 -732.5)'%3E%3Cuse fill='%23050505' href='%23s' y='2'/%3E%3Cuse fill='%23050505' href='%23s' x='1' y='2'/%3E%3Cuse fill='%230a0a0a' href='%23s' x='2' y='2'/%3E%3Cuse fill='%230a0a0a' href='%23s'/%3E%3Cuse fill='%230f0f0f' href='%23s' x='2'/%3E%3Cuse fill='%230f0f0f' href='%23s' x='1' y='1'/%3E%3C/pattern%3E%3Cpattern id='b' width='7' height='11' patternUnits='userSpaceOnUse' patternTransform='scale(42.85) translate(-976.66 -732.5)'%3E%3Cg fill='%23141414'%3E%3Cuse href='%23s'/%3E%3Cuse href='%23s' y='5' /%3E%3Cuse href='%23s' x='1' y='10'/%3E%3Cuse href='%23s' x='2' y='1'/%3E%3Cuse href='%23s' x='2' y='4'/%3E%3Cuse href='%23s' x='3' y='8'/%3E%3Cuse href='%23s' x='4' y='3'/%3E%3Cuse href='%23s' x='4' y='7'/%3E%3Cuse href='%23s' x='5' y='2'/%3E%3Cuse href='%23s' x='5' y='6'/%3E%3Cuse href='%23s' x='6' y='9'/%3E%3C/g%3E%3C/pattern%3E%3Cpattern id='h' width='5' height='13' patternUnits='userSpaceOnUse' patternTransform='scale(42.85) translate(-976.66 -732.5)'%3E%3Cg fill='%23141414'%3E%3Cuse href='%23s' y='5'/%3E%3Cuse href='%23s' y='8'/%3E%3Cuse href='%23s' x='1' y='1'/%3E%3Cuse href='%23s' x='1' y='9'/%3E%3Cuse href='%23s' x='1' y='12'/%3E%3Cuse href='%23s' x='2'/%3E%3Cuse href='%23s' x='2' y='4'/%3E%3Cuse href='%23s' x='3' y='2'/%3E%3Cuse href='%23s' x='3' y='6'/%3E%3Cuse href='%23s' x='3' y='11'/%3E%3Cuse href='%23s' x='4' y='3'/%3E%3Cuse href='%23s' x='4' y='7'/%3E%3Cuse href='%23s' x='4' y='10'/%3E%3C/g%3E%3C/pattern%3E%3Cpattern id='c' width='17' height='13' patternUnits='userSpaceOnUse' patternTransform='scale(42.85) translate(-976.66 -732.5)'%3E%3Cg fill='%231a1a1a'%3E%3Cuse href='%23s' y='11'/%3E%3Cuse href='%23s' x='2' y='9'/%3E%3Cuse href='%23s' x='5' y='12'/%3E%3Cuse href='%23s' x='9' y='4'/%3E%3Cuse href='%23s' x='12' y='1'/%3E%3Cuse href='%23s' x='16' y='6'/%3E%3C/g%3E%3C/pattern%3E%3Cpattern id='d' width='19' height='17' patternUnits='userSpaceOnUse' patternTransform='scale(42.85) translate(-976.66 -732.5)'%3E%3Cg fill='%23000000'%3E%3Cuse href='%23s' y='9'/%3E%3Cuse href='%23s' x='16' y='5'/%3E%3Cuse href='%23s' x='14' y='2'/%3E%3Cuse href='%23s' x='11' y='11'/%3E%3Cuse href='%23s' x='6' y='14'/%3E%3C/g%3E%3Cg fill='%231f1f1f'%3E%3Cuse href='%23s' x='3' y='13'/%3E%3Cuse href='%23s' x='9' y='7'/%3E%3Cuse href='%23s' x='13' y='10'/%3E%3Cuse href='%23s' x='15' y='4'/%3E%3Cuse href='%23s' x='18' y='1'/%3E%3C/g%3E%3C/pattern%3E%3Cpattern id='e' width='47' height='53' patternUnits='userSpaceOnUse' patternTransform='scale(42.85) translate(-976.66 -732.5)'%3E%3Cg fill='%230f0c0c'%3E%3Cuse href='%23s' x='2' y='5'/%3E%3Cuse href='%23s' x='16' y='38'/%3E%3Cuse href='%23s' x='46' y='42'/%3E%3Cuse href='%23s' x='29' y='20'/%3E%3C/g%3E%3C/pattern%3E%3Cpattern id='f' width='59' height='71' patternUnits='userSpaceOnUse' patternTransform='scale(42.85) translate(-976.66 -732.5)'%3E%3Cg fill='%230f0c0c'%3E%3Cuse href='%23s' x='33' y='13'/%3E%3Cuse href='%23s' x='27' y='54'/%3E%3Cuse href='%23s' x='55' y='55'/%3E%3C/g%3E%3C/pattern%3E%3Cpattern id='g' width='139' height='97' patternUnits='userSpaceOnUse' patternTransform='scale(42.85) translate(-976.66 -732.5)'%3E%3Cg fill='%230f0c0c'%3E%3Cuse href='%23s' x='11' y='8'/%3E%3Cuse href='%23s' x='51' y='13'/%3E%3Cuse href='%23s' x='17' y='73'/%3E%3Cuse href='%23s' x='99' y='57'/%3E%3C/g%3E%3C/pattern%3E%3C/defs%3E%3Crect fill='url(%23a)' width='100%25' height='100%25'/%3E%3Crect fill='url(%23b)' width='100%25' height='100%25'/%3E%3Crect fill='url(%23h)' width='100%25' height='100%25'/%3E%3Crect fill='url(%23c)' width='100%25' height='100%25'/%3E%3Crect fill='url(%23d)' width='100%25' height='100%25'/%3E%3Crect fill='url(%23e)' width='100%25' height='100%25'/%3E%3Crect fill='url(%23f)' width='100%25' height='100%25'/%3E%3Crect fill='url(%23g)' width='100%25' height='100%25'/%3E%3C/svg%3E"); }</style><header><div class="w-full bg-center bg-cover bg-black header-bg"><div class="backdrop-filter backdrop-brightness-75"><div class="container mx-auto grid grid-cols-12"><div class="text-left text-white col-span-10 md:col-start-1 md:col-span-11 py-32 px-4"><span class="categories"><a class="py-1 px-2 mr-1 mb-2 inline-block border border-white hover:bg-gray-600" href="/categories/#Software%20Development" title="Software Development">Software Development</a> </span><span class="tags"><a class="py-1 px-2 mr-1 mb-2 inline-block border border-white rounded-full hover:bg-gray-600" href="/tags/#Programming" title="Programming">Programming</a> <a class="py-1 px-2 mr-1 mb-2 inline-block border border-white rounded-full hover:bg-gray-600" href="/tags/#Frontend" title="Frontend">Frontend</a> <a class="py-1 px-2 mr-1 mb-2 inline-block border border-white rounded-full hover:bg-gray-600" href="/tags/#Web%20Development" title="Web Development">Web Development</a> <a class="py-1 px-2 mr-1 mb-2 inline-block border border-white rounded-full hover:bg-gray-600" href="/tags/#Web%20Performance" title="Web Performance">Web Performance</a></span><h1 class="text-6xl my-4">Reduce runtime JavaScript to improve page speed using Puppeteer</h1><h2 class="text-2xl my-4">How I remove some unnecessary JavaScript to make the page loading faster in runtime using Puppeteer</h2><span class="meta">Posted by ntsd on <time datetime="2021-11-03">November 3, 2021</time></span></div></div></div></div></header><article class="container mx-auto grid grid-cols-12"><div class="col-span-10 md:col-start-1 md:col-span-12 py-4 px-4"><div class="py-8"><div class="post-container prose max-w-none"><p>The problem is when I am using many JavaScript libraries with big sizes and unnecessary to run in runtime such as <a href="https://github.com/PrismJS/prism">PrismJS</a>, <a href="https://github.com/bryanbraun/anchorjs">AnchorJS</a>, and <a href="https://github.com/timdream/wordcloud2.js/">Wordcloud2</a>. All of these JavaScript libraries will load content from HTML and render it component by adding element classes and styles.</p><p>In this example, I will show how to use <a href="https://github.com/PrismJS/prism">PrismJS</a> without runtime JavaScript because it’s the biggest library I’m using. To do that I need <a href="https://github.com/puppeteer/puppeteer">Puppeteer</a> headless Chrome for NodeAPI.</p><p>First of all, I download PrismJS from the <a href="https://prismjs.com/download.html">download page</a> and just select all languages then download JavaScript and CSS files. Put both on the HTML page. It took 500kb of JavaScript and 14kb of CSS.</p><pre class="language-html" tabindex="0"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/assets/js/prism.js<span class="token punctuation">"</span></span> <span class="token attr-name">data-post-js</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><p>I have a custom <a href="https://developer.mozilla.org/en-US/docs/Learn/HTML/Howto/Use_data_attributes">data attributes</a> name <code class="highlighter-rouge language-plaintext">data-post-js</code> which I’ll use to specific JavaScript tag for render before runtime. I call it Post JS because it works like PostCSS that will run on build only.</p><p>For JavaScript I want it to run on runtime I use to type <code class="highlighter-rouge language-plaintext">text/runtime-javascript</code> to avoid running in the Puppeteer.</p><pre class="language-html" tabindex="0"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>text/runtime-javascript<span class="token punctuation">'</span></span> <span class="token attr-name">async</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><p>To make it work I create a <a href="https://github.com/gulpjs/gulp">Gulp</a> task when building the page. I want to make Puppeteer run and render the HTML page. Explain below.</p><pre class="line-numbers language-javascript" tabindex="0"><code class="language-javascript">gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">"post-js"</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  browserSync<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">files</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token constant">SITE_ROOT</span> <span class="token operator">+</span> <span class="token string">"/**"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">open</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">7000</span><span class="token punctuation">,</span>
    <span class="token literal-property property">server</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">baseDir</span><span class="token operator">:</span> <span class="token constant">SITE_ROOT</span><span class="token punctuation">,</span>
      <span class="token literal-property property">serveStaticOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">extensions</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"html"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// wait browserSync run</span>

  <span class="token keyword">return</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token constant">SITE_ROOT_HTML</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">base</span><span class="token operator">:</span> <span class="token constant">SITE_ROOT</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>through2<span class="token punctuation">.</span><span class="token function">obj</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">file<span class="token punctuation">,</span> _<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">isBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// not support type</span>
        <span class="token keyword">return</span> <span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> file<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">const</span> relativeRootPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">relative</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> file<span class="token punctuation">.</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> relativePath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">relative</span><span class="token punctuation">(</span><span class="token constant">SITE_ROOT</span><span class="token punctuation">,</span> relativeRootPath<span class="token punctuation">)</span><span class="token punctuation">;</span>

      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Rendering </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>relativePath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">const</span> browser <span class="token operator">=</span> <span class="token keyword">await</span> puppeteer<span class="token punctuation">.</span><span class="token function">launch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> page <span class="token operator">=</span> <span class="token keyword">await</span> browser<span class="token punctuation">.</span><span class="token function">newPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">goto</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://localhost:7000/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>relativePath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">waitUntil</span><span class="token operator">:</span> <span class="token string">'networkidle0'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">let</span> body <span class="token operator">=</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// remove data-post-js script</span>
        <span class="token keyword">const</span> unusedElements <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'script[data-post-js="true"]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> unusedElements<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          unusedElements<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>unusedElements<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>outerHTML<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// replace script type type="text/javascript" to type"text/javascript"</span>
      body <span class="token operator">=</span> body<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">type\=\"text\/runtime\-javascript\"</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'type="text/javascript"'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// DOCTYPE is gone when puppeteer run</span>
      body <span class="token operator">=</span> <span class="token string">'&lt;!DOCTYPE html&gt;'</span> <span class="token operator">+</span> body<span class="token punctuation">;</span>

      file<span class="token punctuation">.</span>contents <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">await</span> browser<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> file<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">htmlmin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">collapseWhitespace</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token constant">SITE_ROOT</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      browserSync<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'post-js finished'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>First, use <a href="https://github.com/BrowserSync/browser-sync">BrowserSync</a> to serve the whole site. (lines 2-12)</p><p>And then use Puppeteer to open the pages and run all of the JavaScript tags. (lines 27-30)</p><p>After the page ran, Remove used JavaScript with the <code class="highlighter-rouge language-plaintext">data-post-js</code> attribute. (lines 32-39)</p><p>Then replace <code class="highlighter-rouge language-plaintext">text/runtime-javascript</code> with <code class="highlighter-rouge language-plaintext">text/javascript</code> to make it a normal run in runtime. (line 42)</p><p>Because <code class="highlighter-rouge language-plaintext">&lt;!DOCTYPE html&gt;</code> will remove when Puppeteer runs so I need to add it again. (line 45)</p><p>Now the page will render PrismJS and remove it from runtime JavaScript. This will make the page faster to not download the 500kb size of PrismJS and no need to wait for the script to render in runtime.</p><p>This method will also work with many JavaScript libraries which not need to run in runtime. The concept is basically the same as <a href="https://nextjs.org/docs/basic-features/pages#pre-rendering">Pre-rendering</a> and <a href="https://nextjs.org/docs/basic-features/data-fetching#getstaticprops-static-generation">getStaticProps</a> in NextJS.</p><p><a href="https://github.com/ntsd/ntsd.dev/blob/e2db2c0f4677b49bb928dcef20ba5b441a67fdbb/gulpfile.babel.js#L132-L188">See in Github</a></p></div><ul class="grid grid-cols-2 text-center mt-8"><li class="col-span-1 border p-4 mr-4 hover:bg-gray-800 hover:text-white"><a href="/postgresql-index-types/" data-toggle="tooltip" data-placement="top" title="Explain index types in PostgreSQL"><div class="text-xl font-bold">Previous</div><div class="text-gray-500">Explain index types in PostgreSQL</div></a></li><li class="col-span-1 border p-4 ml-4 hover:bg-gray-800 hover:text-white"><a href="/git-multiple-accounts/" data-toggle="tooltip" data-placement="top" title="How to manage multiple Git accounts"><div class="text-xl font-bold">Next</div><div class="text-gray-500">How to manage multiple Git accounts</div></a></li></ul></div><div class="comment giscus py-8"></div><div class="pt-8"><a class="text-gray-700 font-bond" href="/tags/">FEATURED TAGS</a><div class="my-4 text-xs"><a class="py-1 px-2 mr-1 mb-2 inline-block border border-black rounded-full hover:bg-gray-300" href="/tags/#Artificial%20Intelligence" title="Artificial Intelligence" rel="1">Artificial Intelligence </a><a class="py-1 px-2 mr-1 mb-2 inline-block border border-black rounded-full hover:bg-gray-300" href="/tags/#Programming" title="Programming" rel="8">Programming </a><a class="py-1 px-2 mr-1 mb-2 inline-block border border-black rounded-full hover:bg-gray-300" href="/tags/#Python" title="Python" rel="2">Python </a><a class="py-1 px-2 mr-1 mb-2 inline-block border border-black rounded-full hover:bg-gray-300" href="/tags/#Code%20golf" title="Code golf" rel="1">Code golf </a><a class="py-1 px-2 mr-1 mb-2 inline-block border border-black rounded-full hover:bg-gray-300" href="/tags/#C++" title="C++" rel="1">C++ </a><a class="py-1 px-2 mr-1 mb-2 inline-block border border-black rounded-full hover:bg-gray-300" href="/tags/#aria2" title="aria2" rel="1">aria2 </a><a class="py-1 px-2 mr-1 mb-2 inline-block border border-black rounded-full hover:bg-gray-300" href="/tags/#Network" title="Network" rel="3">Network </a><a class="py-1 px-2 mr-1 mb-2 inline-block border border-black rounded-full hover:bg-gray-300" href="/tags/#OpenWRT" title="OpenWRT" rel="1">OpenWRT </a><a class="py-1 px-2 mr-1 mb-2 inline-block border border-black rounded-full hover:bg-gray-300" href="/tags/#Router" title="Router" rel="1">Router </a><a class="py-1 px-2 mr-1 mb-2 inline-block border border-black rounded-full hover:bg-gray-300" href="/tags/#Embedded" title="Embedded" rel="1">Embedded </a><a class="py-1 px-2 mr-1 mb-2 inline-block border border-black rounded-full hover:bg-gray-300" href="/tags/#Gatsby" title="Gatsby" rel="1">Gatsby </a><a class="py-1 px-2 mr-1 mb-2 inline-block border border-black rounded-full hover:bg-gray-300" href="/tags/#React" title="React" rel="1">React </a><a class="py-1 px-2 mr-1 mb-2 inline-block border border-black rounded-full hover:bg-gray-300" href="/tags/#GraphQL" title="GraphQL" rel="1">GraphQL </a><a class="py-1 px-2 mr-1 mb-2 inline-block border border-black rounded-full hover:bg-gray-300" href="/tags/#Progressive%20Web%20App" title="Progressive Web App" rel="1">Progressive Web App </a><a class="py-1 px-2 mr-1 mb-2 inline-block border border-black rounded-full hover:bg-gray-300" href="/tags/#TypeScript" title="TypeScript" rel="2">TypeScript </a><a class="py-1 px-2 mr-1 mb-2 inline-block border border-black rounded-full hover:bg-gray-300" href="/tags/#Frontend" title="Frontend" rel="5">Frontend </a><a class="py-1 px-2 mr-1 mb-2 inline-block border border-black rounded-full hover:bg-gray-300" href="/tags/#Facebook%20Developer" title="Facebook Developer" rel="1">Facebook Developer </a><a class="py-1 px-2 mr-1 mb-2 inline-block border border-black rounded-full hover:bg-gray-300" href="/tags/#ESLint" title="ESLint" rel="1">ESLint </a><a class="py-1 px-2 mr-1 mb-2 inline-block border border-black rounded-full hover:bg-gray-300" href="/tags/#Hosting" title="Hosting" rel="1">Hosting </a><a class="py-1 px-2 mr-1 mb-2 inline-block border border-black rounded-full hover:bg-gray-300" href="/tags/#Website" title="Website" rel="1">Website </a><a class="py-1 px-2 mr-1 mb-2 inline-block border border-black rounded-full hover:bg-gray-300" href="/tags/#Web%20Performance" title="Web Performance" rel="2">Web Performance </a><a class="py-1 px-2 mr-1 mb-2 inline-block border border-black rounded-full hover:bg-gray-300" href="/tags/#Database" title="Database" rel="1">Database </a><a class="py-1 px-2 mr-1 mb-2 inline-block border border-black rounded-full hover:bg-gray-300" href="/tags/#PostgreSQL" title="PostgreSQL" rel="1">PostgreSQL </a><a class="py-1 px-2 mr-1 mb-2 inline-block border border-black rounded-full hover:bg-gray-300" href="/tags/#Performance" title="Performance" rel="1">Performance </a><a class="py-1 px-2 mr-1 mb-2 inline-block border border-black rounded-full hover:bg-gray-300" href="/tags/#Backend" title="Backend" rel="1">Backend </a><a class="py-1 px-2 mr-1 mb-2 inline-block border border-black rounded-full hover:bg-gray-300" href="/tags/#Web%20Development" title="Web Development" rel="1">Web Development </a><a class="py-1 px-2 mr-1 mb-2 inline-block border border-black rounded-full hover:bg-gray-300" href="/tags/#Git" title="Git" rel="1">Git </a><a class="py-1 px-2 mr-1 mb-2 inline-block border border-black rounded-full hover:bg-gray-300" href="/tags/#Security" title="Security" rel="1">Security </a><a class="py-1 px-2 mr-1 mb-2 inline-block border border-black rounded-full hover:bg-gray-300" href="/tags/#Kubernetes" title="Kubernetes" rel="1">Kubernetes </a><a class="py-1 px-2 mr-1 mb-2 inline-block border border-black rounded-full hover:bg-gray-300" href="/tags/#Google%20Cloud%20Platform" title="Google Cloud Platform" rel="1">Google Cloud Platform</a></div></div></div></article><script type="text/javascript">setTimeout(function () { var d = document, s = d.createElement("script"); s.src = " https://giscus.app/client.js"; s.setAttribute("data-repo", "ntsd/ntsd.dev"); s.setAttribute("data-repo-id", "R_kgDOGQFuoQ"); s.setAttribute("data-category", "General"); s.setAttribute("data-category-id", "DIC_kwDOGQFuoc4CR2-u"); s.setAttribute("data-mapping", "pathname"); s.setAttribute("data-reactions-enabled", "0"); s.setAttribute("data-emit-metadata", "0"); s.setAttribute("data-theme", "light"); s.setAttribute("data-lang", "en"); s.setAttribute("data-loading", "lazy"); s.setAttribute("crossorigin", "anonymous"); (d.head || d.body).appendChild(s); }, 4000);</script><style>.anchorjs-link { color: #777 !important; text-decoration: none !important; } .anchorjs-link:hover { color: #000 !important; } .anchorjs-link::before { content: "#"; }</style><link rel="stylesheet" href="/assets/css/prism.css"><footer><hr class="mt-10 dark:border-gray-500"><div class="container px-4 py-8 mx-auto"><div class="flex flex-col lg:flex-row justify-between text-gray-800 space-y-4 lg:space-y-0"><div class="flex justify-center lg:justify-start"><div class="flex space-x-4"><a aria-label="RSS" class="text-gray-600 hover:text-gray-400" href="/feed.xml" rel="noopener noreferrer" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" class="w-7 h-7 fill-current" viewBox="0 0 20 20"><path d="M5 3a1 1 0 000 2c5.523 0 10 4.477 10 10a1 1 0 102 0C17 8.373 11.627 3 5 3z"></path><path d="M4 9a1 1 0 011-1 7 7 0 017 7 1 1 0 11-2 0 5 5 0 00-5-5 1 1 0 01-1-1zM3 15a2 2 0 114 0 2 2 0 01-4 0z"></path></svg> </a><a aria-label="Github" class="text-gray-600 hover:text-gray-400" href="https://github.com/ntsd" rel="noopener noreferrer" target="_blank"><svg class="w-7 h-7 fill-current" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12.026 2C7.13295 1.99937 2.96183 5.54799 2.17842 10.3779C1.395 15.2079 4.23061 19.893 8.87302 21.439C9.37302 21.529 9.55202 21.222 9.55202 20.958C9.55202 20.721 9.54402 20.093 9.54102 19.258C6.76602 19.858 6.18002 17.92 6.18002 17.92C5.99733 17.317 5.60459 16.7993 5.07302 16.461C4.17302 15.842 5.14202 15.856 5.14202 15.856C5.78269 15.9438 6.34657 16.3235 6.66902 16.884C6.94195 17.3803 7.40177 17.747 7.94632 17.9026C8.49087 18.0583 9.07503 17.99 9.56902 17.713C9.61544 17.207 9.84055 16.7341 10.204 16.379C7.99002 16.128 5.66202 15.272 5.66202 11.449C5.64973 10.4602 6.01691 9.5043 6.68802 8.778C6.38437 7.91731 6.42013 6.97325 6.78802 6.138C6.78802 6.138 7.62502 5.869 9.53002 7.159C11.1639 6.71101 12.8882 6.71101 14.522 7.159C16.428 5.868 17.264 6.138 17.264 6.138C17.6336 6.97286 17.6694 7.91757 17.364 8.778C18.0376 9.50423 18.4045 10.4626 18.388 11.453C18.388 15.286 16.058 16.128 13.836 16.375C14.3153 16.8651 14.5612 17.5373 14.511 18.221C14.511 19.555 14.499 20.631 14.499 20.958C14.499 21.225 14.677 21.535 15.186 21.437C19.8265 19.8884 22.6591 15.203 21.874 10.3743C21.089 5.54565 16.9181 1.99888 12.026 2Z"></path></svg> </a><a aria-label="Linkedin" class="text-gray-600 hover:text-gray-400" href="https://www.linkedin.com/in/ntsd" rel="noopener noreferrer" target="_blank"><svg class="w-7 h-7 fill-current" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 21H9V9H13V11C13.8526 9.91525 15.1456 9.26857 16.525 9.237C19.0056 9.25077 21.0072 11.2694 21 13.75V21H17V14.25C16.84 13.1326 15.8818 12.3036 14.753 12.306C14.2593 12.3216 13.7932 12.5378 13.4624 12.9046C13.1316 13.2715 12.9646 13.7573 13 14.25V21ZM7 21H3V9H7V21ZM5 7C3.89543 7 3 6.10457 3 5C3 3.89543 3.89543 3 5 3C6.10457 3 7 3.89543 7 5C7 5.53043 6.78929 6.03914 6.41421 6.41421C6.03914 6.78929 5.53043 7 5 7Z"></path></svg> </a><a aria-label="Webring" class="text-gray-600 hover:text-gray-400" href="https://webring.wonderful.software#ntsd.dev" rel="noopener noreferrer" target="_blank"><svg class="mt-1 w-6 h-6 fill-current" fill="none" viewBox="0 0 416 416" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M53 128.8l-16-8.2a192 192 0 1094.7-88.9l7.1 16.6A174 174 0 1153 128.8z" fill-rule="evenodd" fill="currentColor"></path><path d="M94.7 92.3L82 126.5 62.6 95.7l-36.4-1.4 23.3-28-9.9-35.1 33.9 13.5 30.3-20.3-2.4 36.4L130 83.3l-35.3 9z" fill="currentColor"></path></svg></a></div></div><div class="text-center lg:text-right"><div>Copyright © Jirawat Boonkumnerd 2023</div></div></div></div></footer><script type="text/javascript" async="">if ('serviceWorker' in navigator) { navigator.serviceWorker.register('/sw.js').catch((err) => { console.error("service worker register error:", err); }); navigator.serviceWorker.onmessage = (e) => { const data = e.data; if(data.command == "UPDATE_FOUND"){ console.log("UPDATE_FOUND_BY_SW", data); location.reload(); } }; }</script></body></html>